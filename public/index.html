<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Index</title>
		
		

		<link rel="shortcut icon" href="favicon.ico" />
		<link rel="alternate" type="application/rss+xml" 
					href="http://joshua.themarshians.com/feed.rss" />

		<!-- jQuery for bootstrap. -->
		<script 
			 src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js">
		</script>

		<!-- Center ads on ready. -->
		<script type="text/javascript">
			$(document).ready(function() {
			if (window.innerWidth > 800) {
			$(".centerad").css({"width": "728px"});
			} else {
			$(".centerad").css({"width": "320px"});
			}
			});
		</script>

		<!-- These are the style sheets for syntax highlighting. -->
		<link type="text/css" rel="stylesheet" 
					href="rainbow/css/github.css"/>

		<!-- Twitter Bootstrap. -->
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">

		<!-- Our own CSS. -->
		<style>
			body {
			/* 60px to make the container go all the way to the bottom of the
			topbar */
			padding-top: 60px; 
			}

			footer {
			text-align: center;
			font-size: small;
			}

			.float-right {
			float: right;
			padding: 5px;
			}

			.centerad {
			margin-left: auto;
			margin-right: auto;
			}
		</style
			 </head>
	<body>
		<div class="container">

			<!-- This is the top navigation bar. -->
			<div class="navbar navbar-inverse navbar-fixed-top">
				<div class="navbar-inner">
					<div class="container">
						<a class="btn btn-navbar" data-toggle="collapse" 
							 data-target=".nav-collapse">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</a>
						<a class="brand" href="index.html">
							Non Impediti Ratione Cogitationis
						</a>
						<div class="nav-collapse collapse">
							<ul class="nav">
								<li class="active">
									<a href="index.html">
										<i class="icon-home icon-white"></i>
										Home
									</a>
								</li>
								<li >
									<a href="tags.html">
										<i class="icon-tag icon-white"></i>
										Tags
									</a>
								</li>
								<li >
									<a href="archives.html">
										<i class="icon-hdd icon-white"></i>
										Archives
									</a>
								</li>
								<li >
									<a href="about.html">
										<i class="icon-user icon-white"></i>
										About
									</a>
								</li>
								<li>
									<a href="feed.rss">
										<i class="icon-th-list icon-white"></i>
										RSS
									</a>
								</li>
							</ul>
						</div><!--/.nav-collapse -->
					</div>
				</div>
			</div>

			
<div class="row">
	<div class="span12">
		
		<h1><a href="dont-reinvent-the-wheel.html">Don't Reinvent the Wheel</a></h1>
		

		<p>
			<small id="entry-date">
				2013-05-05 (Updated: 2013-05-05)
			</small>
		</p>

		<!-- Title: Don't Reinvent the Wheel -->

<!-- Author: Joshua Marsh -->

<!-- Description: After presenting at and attending OpenWest, the best thing I got out of it was, "don't reinvent the wheel."
<!-- Tags: linux,go,angularjs,appengine  -->

<p>This last week, I had the opportunity to attend the
<a href="http://www.openwest.org/">OpenWest</a> conference. I can&rsquo;t say enough
about how amazing it was. If you have the opportunity next year to
attend, you should definitely do it! During the conference, I was able
to <a href="http://joind.in/talk/view/8316">present</a> on some of my recent blog
posts. I was also able to attend a session and a keynote from
<a href="http://en.wikipedia.org/wiki/Rasmus_Lerdorf">Rasmus Lerdorf</a> and many
other really smart people. I felt like everyone came together with a
common goal of sharing the knowledge they had and learning from the
experience of others.</p>

<p>If I had to list the most important thing I got out of it, it would be
&ldquo;don&rsquo;t reinvent the wheel.&rdquo; As is the case with many hackers, I often
find myself with a chip on my shoulder. I see some open source program
or piece of code and immediately think, &ldquo;I could do it better.&rdquo; The
reality is that while I might be able to do it better, the time and
effort involved in doing it better takes time away from bringing my
own new ideas to fruition.</p>

<p>While there are cases where it&rsquo;s worthwhile to rewrite something
yourself, they definitely should not be a regular part of your
programming. The beauty of open source software is that we can
leverage the work that someone else has already done. This enables us
to make our ideas reality at a faster pace than in the proprietary
world.</p>

<p>The goal of my presentation was to provide a perfect example of
this. By leveraging the work already done by really smart people, I
was able to take an <a href="https://github.com/icub3d/home">idea</a> (albeit a
small one) and have a working concept in just a couple of weekends
worth of work. If I had tried to do the same project without
<a href="http://angularjs.org/">AngularJS</a>, <a href="http://golang.org/">Go</a>, and
<a href="https://developers.google.com/appengine/">App Engine</a> it would have
easily taken months.</p>

<p>In the open source world we have the opportunity to stand on the
shoulders of
giants<sup><a href="http://en.wikipedia.org/wiki/Standing_on_the_shoulders_of_giants">1</a></sup>. Let&rsquo;s
use that opportunity to our advantage and accelerate the rate of
innovation.</p>


		
		<div class="tags">
			<ul>
				
				<li><a href="tags.html#linux">linux</a></li>
				
				<li><a href="tags.html#go">go</a></li>
				
				<li><a href="tags.html#angularjs">angularjs</a></li>
				
				<li><a href="tags.html#appengine">appengine</a></li>
				
			</ul>
		</div>
		
	</div>
</div>
<hr>

<div class="row">
	<div class="span12">
		
		<h1><a href="hardcore-google-communicating-angularjs.html">Hardcore Google: RESTful Communication With AngularJS</a></h1>
		

		<p>
			<small id="entry-date">
				2013-03-12
			</small>
		</p>

		<!-- Title: Hardcore Google: RESTful Communication With AngularJS -->

<!-- Author: Joshua Marsh -->

<!-- Description: I recently began a project using Go, AngularJS, and Google App Engine. In this installment of a series of blog posts, I describe how to use AngularJS and get it communicating with Go. -->

<!-- Tags: go,appengine,golang,angularjs,google -->

<!-- Languages: go,javascript -->

<p>This post is part of a series <em>Hardcore Google</em>. You can find other
posts here:</p>

<ul>
<li><a href="hardcore-google-unit-testing.html">Unit Testing App Engine</a></li>
<li><a href="hardcore-google-communicating-go.html">RESTful Web Services In Go</a></li>
<li><a href="hardcore-google-communicating-angularjs.html">RESTful Communication With AngularJS</a></li>
</ul>

<p>My history with <a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript</a>
goes back almost 15 years. Back then, working in the browser was was
difficult. Eventually tools like <a href="http://jquery.com/">jQuery</a> came
around and made the work somewhat simpler. It wasn&rsquo;t until I
discovered <a href="http://angularjs.org/">AngularJS</a> though that I felt like
JavaScript development had come out of adolescence. AngularJS does a
great job at solving problems that professional engineers often find
clunky with JavaScript &emdash; namely separating the
<a href="http://en.wikipedia.org/wiki/HTML">HTML</a> and
<a href="http://en.wikipedia.org/wiki/CSS">CSS</a> from the code that drives it,
properly testing code, and developing rich, dynamic web
applications. What I love about AngularJS as well is that it doesn&rsquo;t
doesn&rsquo;t try to get away from using JavaScript but merely enhance it.</p>

<p>Enough gushing though. If you are new to AngularJS, you can find great
tutorials on their website or you can contact me directly. What I&rsquo;m
interested in talking about today is how AngularJS interacts with web
services, particularly
<a href="http://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>ful
web services. In my
<a href="hardcore-google-communicating-go.html">last post</a>, we got
<a href="http://golang.org/">Go</a> to serve our web services. Now we just need
our front end web app to communicate with that service.</p>

<p>AngularJS provides two ways to wire up a back end. The simplest method
is to use the
<a href="http://docs.angularjs.org/api/ngResource.$resource">$resource</a>
service. It provides a simple interface to a web service. If you need
finer grained control though, you can use the
<a href="http://docs.angularjs.org/api/ng.$http">$http</a> service. I&rsquo;ll show you
below how to use the <em>$http</em> service because that&rsquo;s what I ended up
going with. If you decide to use the <em>$resource</em> service though, just
keep in mind that it currently always strips the trailing slash wether
you ask it to or not. You&rsquo;ll need to have your
<a href="http://golang.org/pkg/net/http/">http.Handler</a>s account for that. For
example:</p>

<pre><code data-language="go">func fooHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "Thanks for the %s!", r.Method)
}

// Handle /foo
http.HandleFunc("/foo", fooHandler)

// Or Handle /foo/
http.HandleFunc("/foo/", fooHandler)
</code></pre>

<p>Before, we go about using the <em>$http</em> service though, we need to talk
about services in general. Like the <em>$http</em> and <em>$resource</em> services
that AngularJS provides, you can create your own. Services are a great
way to decouple code such as connecting to a web service. You can
<a href="http://en.wikipedia.org/wiki/Mock_object">mock</a> them when you are
testing the parts of your application that use them and AngularJS will
manage the instantiation and destruction of the services for you. You
can find a complete example of a user defined service in the file
<a href="https://github.com/icub3d/home/blob/master/dev/js/rest/lists.js">list.js</a>.</p>

<p>Let&rsquo;s walk through the create function. It handles the creation of new
lists or making copies of existing lists. We start by making a <em>POST</em>
using the <em>$http</em> service.</p>

<pre><code data-language="javascript">var promise = $http.post("/rest/list/", data);
</code></pre>

<p>This performs an HTTP POST to the URL <em>&rdquo;/rest/list/&rdquo;</em> with the JSON
data as the content of the POST. There are similar functions for
<em>put</em>, <em>get</em>, and <em>delete</em> that correspond to the HTTP <em>PUT</em>, <em>GET</em>
and <em>DELETE</em> methods. The data could technically be anything. In this
case though, it&rsquo;s a JavaScript object that contains the information
necessary to create the new list. AngularJS will take care of
converting the object into JSON that our Go web service can consume.</p>

<p>The <a href="http://wiki.commonjs.org/wiki/Promises">promise</a> returned allows
you to hook a success and failure function to the asynchronous
response to the request. Here, we call the <em>scall</em> or <em>ecall</em>
functions based on the success or failure of the <em>POST</em>. A similar
thing happens in all the other functions for the service. In the <em>get</em>
function, for example, we do the same thing. The only thing that
differs is that we expect a key for the list being retrieved.</p>

<pre><code data-language="javascript">this.get = function(key, scall, ecall) {
    var promise = $http.get("/rest/list/" + key + "/");
    ...
</code></pre>

<p>You can see an example of using both of these functions and the
service in the
<a href="https://github.com/icub3d/home/blob/master/dev/js/lists/all.js">all.js</a>
file in the <em>$scope.copy</em> function:</p>

<pre><code data-language="javascript">$scope.copy = function() {
    Lists.get($scope.data.key, function(l) {
        l.Name = $scope.data.name;
        Lists.create(l, function(nl) {
                $location.path('/lists/view/' + nl.Key + '/');
        });
    });
};
</code></pre>

<p>The goal of the <em>copy</em> function is to make a copy of a list with a new
name. We do that by <em>get*ting the list to be copied by its key. If
that succeeds, we change the list name and call the *create</em> function
for that list. If it succeeds, then we redirect to the new list.</p>

<p>I like this function because it shows the simplicity of using
AngularJS&rsquo;s frameworks. I can make two service calls in just a few
lines of code to do something meaningful with the application. It also
exemplifies the notion of &ldquo;going with the flow.&rdquo; Most libraries or
programming languages have a right and wrong way of doing things. If
you do it the right way, you can get a lot of functionality with just
a few lines of code. This makes your code both easier to read and
maintain.</p>


		
		<div class="tags">
			<ul>
				
				<li><a href="tags.html#go">go</a></li>
				
				<li><a href="tags.html#appengine">appengine</a></li>
				
				<li><a href="tags.html#golang">golang</a></li>
				
				<li><a href="tags.html#angularjs">angularjs</a></li>
				
				<li><a href="tags.html#google">google</a></li>
				
			</ul>
		</div>
		
	</div>
</div>
<hr>

<div class="row">
	<div class="span12">
		
		<h1><a href="hardcore-google-communicating-go.html">Hardcore Google: RESTful Web Services In Go</a></h1>
		

		<p>
			<small id="entry-date">
				2013-02-16 (Updated: 2013-03-12)
			</small>
		</p>

		<!-- Title: Hardcore Google: RESTful Web Services In Go -->

<!-- Author: Joshua Marsh -->

<!-- Description: I recently began a project using Go, AngularJS, and Google App Engine. In this installment of a series of blog posts, I describe how to get Go to be a robust RESTful web service. -->

<!-- Tags: go,appengine,golang,angularjs,google -->

<!-- Languages: go -->

<p>This post is part of a series <em>Hardcore Google</em>. You can find other
posts here:</p>

<ul>
<li><a href="hardcore-google-unit-testing.html">Unit Testing App Engine</a></li>
<li><a href="hardcore-google-communicating-go.html">RESTful Web Services In Go</a></li>
<li><a href="hardcore-google-communicating-angularjs.html">RESTful Communication With AngularJS</a></li>
</ul>

<p>When you first start developing a web application, one of the first
big decision you make after choosing your tool set is how these tools
will interact with each other. For my project, I had already chosen
<a href="http://golang.org/">Go</a> for my back-end,
<a href="http://angularjs.org/">AngularJS</a> for by front-end, and
<a href="https://developers.google.com/appengine/">Google App Engine</a> to host
it all. It was just a matter of figuring out how to get Go and
AngularJS to communicate with each other. Fortunately doing that was
stupid-simple.</p>

<p>I chose a
<a href="http://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>ful
API for communication because it seemed to be the most organized
method of communication and both sides of the web application support
it quite well. I&rsquo;ve found in my development career that trying to fit
a square peg into a round hole only makes you lose your hair
faster, so REST it was.</p>

<p>Using a RESTful web service means that you&rsquo;ll be managing your data
based on the HTTP method (i.e. GET, POST, DELETE, etc.) and URL. On
the Go side of things, you&rsquo;ll be using the
<a href="http://golang.org/pkg/net/http/">net/http</a> package to handle the
requests from AngularJS. At a high level, you tell Go to handle a
request like this:</p>

<pre><code data-language="go">http.HandleFunc("/bar", func(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "Thanks for the %s!", r.Method)
})
</code></pre>

<p>Here we register a function to handle all requests to <em>/bar</em>. Every
function that handles a request has the same function definition: it
has as its parameters an http.ResponseWriter which is used to write a
response and an http.Request which contains the details of the request
being made. In this case, if we started up this server, and made the
request &ldquo;DELETE /bar&rdquo;, we&rsquo;d receive back &ldquo;Thanks for the DELETE!&rdquo;</p>

<p>Hopefully, you can see where this is going. To implement a RESTful API
in Go, you would register handlers for each URL endpoint and then
based on the given method you&rsquo;d perform an operation. We can make this
process even better though by using
<a href="http://www.gorillatoolkit.org/pkg/mux">gorilla/mux</a>. It is a drop in
replacement for Go&rsquo;s http handlers, but it can take care of the details
of routing based on the HTTP method. Here is an example:</p>

<pre><code data-language="go">m := mux.NewRouter()

// Get all lists.
m.HandleFunc("/", GetAllLists).Methods("GET")

// Make a new list.
m.HandleFunc("/", PostList).Methods("POST")

// Singe list operations.
m.HandleFunc("/{key}/", GetList).Methods("GET")
m.HandleFunc("/{key}/", PutList).Methods("PUT")
m.HandleFunc("/{key}/", DeleteList).Methods("DELETE")

// Everything else fails.
m.HandleFunc("/{path:.*}", gorca.NotFoundFunc)
</code></pre>

<p>As you can see, I register handlers for each of the REST methods I&rsquo;m
interested in. In this example, I&rsquo;m registering some functionality for
the list part of my web application. I can either <em>GET</em> all of the
lists or <em>POST</em> a new list at the root (<em>/</em>). If I&rsquo;m given a key
(<em>/{key}/</em>) in the URL, then I&rsquo;m dealing with a specific list. In that
case, I can get the list, update the list, or delete with list with
<em>GET</em>, <em>PUT</em>, and <em>DELETE</em>.</p>

<p>The last <em>HandleFunc</em> acts as a catch all. If the client makes a
request that isn&rsquo;t one explicitly listed, we return a 404 status and a
JSON response with the details. The <em>net/http</em> package already returns
a simple 404, but I wanted to return a JSON response as well. Using
the catch all allows me to send that JSON response. The client can
then present a useful message to the user should something go wrong
instead of a somewhat useless &ldquo;Not Found&rdquo;.</p>

<p>As an example of how the handlers look, the <em>GetAllLists</em> handler
looks like this:</p>

<pre><code data-language="go">// GetAllLists fetches all of the lists.
func GetAllLists(w http.ResponseWriter, r *http.Request) {
    // Create the query.
    c := appengine.NewContext(r)
    q := datastore.NewQuery("List").Order("-LastModified")

    // Fetch the lists. 
    lists := []List{}
    if _, err := q.GetAll(c, &lists); err != nil {
        gorca.LogAndUnexpected(c, w, r, err)
        return
    }

    // Write the lists as JSON.
    gorca.WriteJSON(c, w, r, lists)
}
</code></pre>

<p>Some of the details may be fuzzy if you aren&rsquo;t familiar with App
Engine, but I basically fetch all of the lists from App Engine&rsquo;s
<a href="https://developers.google.com/appengine/docs/go/datastore/">datastore</a>
and then convert it to <a href="http://www.json.org/">JSON</a> and send that as
the response.</p>

<p>The <em>GetAllLists</em> function is a great example of how Go and App Engine
interact to make development simple. In just a couple of dozen lines
of code, I can create a robust REST web service. I don&rsquo;t have to deal
with <a href="http://www.mysql.com/">MySQL</a> connections, user authentication,
or parsing incoming HTTP requests. App Engine and Go do all that for
me. The net result is that I have more readable, testable, and
maintainable code.</p>

<p>You can see how I hooked this all up in more detail in
my application:</p>

<ul>
<li><a href="https://github.com/icub3d/home/">Home App</a></li>
<li><a href="https://github.com/icub3d/home/blob/master/rest/rest.go">The Global Handler</a></li>
<li><a href="https://github.com/icub3d/home/blob/master/rest/list/muxer.go">The List Handler</a></li>
<li><a href="https://github.com/icub3d/home/tree/master/rest/list">The List Handler Functions</a></li>
</ul>

<p>I was truly surprised at how easy this process was. Rigging up a
back-end can be a nightmare. At work, I deal with a
<a href="http://en.wikipedia.org/wiki/SOAP">SOAP</a> web service and I am willing
to testify in court that the &rsquo;S&rsquo; (simple) is a lie. With Go, this
isn&rsquo;t the case. It already provides great functionality and the open
source nature of the language means that great packages like
<em>gorilla/mux</em> are there when you want them. Stay tuned, for next
time. I&rsquo;ll talk about getting AngularJS to consume and present the
JSON we are sending back.</p>


		
		<div class="tags">
			<ul>
				
				<li><a href="tags.html#go">go</a></li>
				
				<li><a href="tags.html#appengine">appengine</a></li>
				
				<li><a href="tags.html#golang">golang</a></li>
				
				<li><a href="tags.html#angularjs">angularjs</a></li>
				
				<li><a href="tags.html#google">google</a></li>
				
			</ul>
		</div>
		
	</div>
</div>
<hr>


<p><a href="archives.html">More...</a></p>


			<div class="centerad">
				<script type="text/javascript">
					if (window.innerWidth > 800) {
		google_ad_client = "ca-pub-5250935198625278";
		/* joshua.themarshians.com (normal) */
		google_ad_slot = "4997781473";
		google_ad_width = 728;
		google_ad_height = 90;
		} else {
		google_ad_client = "ca-pub-5250935198625278";
		/* joshua.themarshians.com (mobile) */
		google_ad_slot = "7951247872";
		google_ad_width = 320;
		google_ad_height = 50;
		}
</script>
<script type="text/javascript"
				src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<footer>
	<p>
		<a rel="license" 
			 href="http://creativecommons.org/licenses/by/3.0/us/">
			<img alt="Creative Commons License" 
					 style="border-width:0" 
					 src="http://i.creativecommons.org/l/by/3.0/us/80x15.png" />
		</a>
		<br />
		This work is licensed under a 
		<a rel="license" 
			 href="http://creativecommons.org/licenses/by/3.0/us/">
			Creative Commons Attribution 3.0 United States License
		</a>.
	</p>
	<p>This site was generated with <a href="https://github.com/icub3d/goblog">goblog</a>.</p>
</footer>
</div>

<!-- These are the scripts for syntax highlighting. -->
<script 
	 src="//cdnjs.cloudflare.com/ajax/libs/rainbow/1.1.8/js/rainbow.min.js ">
</script>
<script src="rainbow/js/language/generic.js"></script>

<script src="rainbow/js/language/go.js"></script>

<script src="rainbow/js/language/javascript.js"></script>


<!-- Twitter Bootstrap. -->
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>

<!-- Google Analytics. -->
<script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-37698200-1']);
	_gaq.push(['_trackPageview']);

	(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();

</script>
</body>
</html>
